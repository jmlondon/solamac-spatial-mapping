<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>SOLAMAC Workshop - Spatial Analysis and Mapping in R</title>
  <meta name="description" content="This is a book of resources, references, and examples as part of the Spatial Analysis and Mapping in R workshop as part of SOLAMAC 2018 in Lima, Peru">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="SOLAMAC Workshop - Spatial Analysis and Mapping in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a book of resources, references, and examples as part of the Spatial Analysis and Mapping in R workshop as part of SOLAMAC 2018 in Lima, Peru" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="SOLAMAC Workshop - Spatial Analysis and Mapping in R" />
  
  <meta name="twitter:description" content="This is a book of resources, references, and examples as part of the Spatial Analysis and Mapping in R workshop as part of SOLAMAC 2018 in Lima, Peru" />
  

<meta name="author" content="Josh M. London">


<meta name="date" content="2018-10-31">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="intro.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">SOLAMAC Workshop - Spatial Mapping in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#spatial-analysis-and-data-types"><i class="fa fa-check"></i><b>2.1</b> Spatial Analysis and Data Types</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#making-maps-with-ggplot2-and-ggspatial"><i class="fa fa-check"></i><b>2.2</b> Making Maps with <code>ggplot2</code> and <code>ggspatial</code></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exercise-1-loading-spatial-data.html"><a href="exercise-1-loading-spatial-data.html"><i class="fa fa-check"></i><b>3</b> Exercise #1: Loading Spatial Data</a><ul>
<li class="chapter" data-level="3.1" data-path="exercise-1-loading-spatial-data.html"><a href="exercise-1-loading-spatial-data.html#load-shapefiles-into-r"><i class="fa fa-check"></i><b>3.1</b> Load Shapefiles Into R</a></li>
<li class="chapter" data-level="3.2" data-path="exercise-1-loading-spatial-data.html"><a href="exercise-1-loading-spatial-data.html#first-map-with-ggplot"><i class="fa fa-check"></i><b>3.2</b> First Map with ggplot</a><ul>
<li class="chapter" data-level="3.2.1" data-path="exercise-1-loading-spatial-data.html"><a href="exercise-1-loading-spatial-data.html#cartolight"><i class="fa fa-check"></i><b>3.2.1</b> cartolight</a></li>
<li class="chapter" data-level="3.2.2" data-path="exercise-1-loading-spatial-data.html"><a href="exercise-1-loading-spatial-data.html#microsoft-bing-aerial-imagery"><i class="fa fa-check"></i><b>3.2.2</b> Microsoft Bing Aerial Imagery</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">SOLAMAC Workshop - Spatial Analysis and Mapping in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exercise-1-loading-spatial-data" class="section level1">
<h1><span class="header-section-number">Section 3</span> Exercise #1: Loading Spatial Data</h1>
<div id="load-shapefiles-into-r" class="section level2">
<h2><span class="header-section-number">3.1</span> Load Shapefiles Into R</h2>
<p>The <code>sf</code> package has wide-ranging support for importing vairous spatial
data/file formats. You can even import data directly from a spatially
enabled database (e.g. PostgreSQL/PostGIS). One of the more common spatial
file formats you may encounter is the ESRI Shapefile format.</p>
<p>Here, we will work with an example from a research effort surveying for
<em>Franciscana</em>. Prior to the survey effort, there was a region identified as
a hiatus, or gap, where there were no historical sightings of <em>Franciscana</em>. This
region was defined and is provided as a Shapefile.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<pre><code>## ── Attaching packages ────────────────────────────────────────────────────────────────────────────────── tidyverse 1.2.1 ──</code></pre>
<pre><code>## ✔ ggplot2 3.0.0     ✔ purrr   0.2.5
## ✔ tibble  1.4.2     ✔ dplyr   0.7.7
## ✔ tidyr   0.8.1     ✔ stringr 1.3.1
## ✔ readr   1.1.1     ✔ forcats 0.3.0</code></pre>
<pre><code>## ── Conflicts ───────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">library</span>(sf)</a></code></pre></div>
<pre><code>## Linking to GEOS 3.6.2, GDAL 2.3.0, PROJ 5.1.0</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">library</span>(lwgeom)</a></code></pre></div>
<pre><code>## Linking to liblwgeom 2.4.4 r16526, GEOS 3.6.2, proj.4 5.1.0</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">hiatus_path &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="st">&quot;..&quot;</span>,<span class="st">&quot;data&quot;</span>,<span class="st">&quot;Fraciscana_Example&quot;</span>,<span class="st">&quot;Hiatus.shp&quot;</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"></a>
<a class="sourceLine" id="cb9-3" data-line-number="3">hiatus &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_read</span>(hiatus_path)</a></code></pre></div>
<pre><code>## Reading layer `Hiatus&#39; from data source `/Users/josh.london/_projects/r/solamac-spatial-mapping/data/Fraciscana_Example/Hiatus.shp&#39; using driver `ESRI Shapefile&#39;</code></pre>
<pre><code>## Warning in CPL_read_ogr(dsn, layer, query, as.character(options), quiet, :
## GDAL Message 1: organizePolygons() received an unexpected geometry. Either
## a polygon with interior rings, or a polygon with less than 4 points, or a
## non-Polygon geometry. Return arguments as a collection.</code></pre>
<pre><code>## Simple feature collection with 1 feature and 1 field
## geometry type:  POLYGON
## dimension:      XY
## bbox:           xmin: -40.95967 ymin: -21.44691 xmax: -39.77479 ymax: -19.68095
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs</code></pre>
<p>This demonstrates a common issue with Shapefiles. Sometimes they can be improperly
formed or corrupted. The <code>lwgeom</code> package has a function <code>st_make_valid()</code> which
can fix most of these issues. There is one additional step required
(<code>sf::st_collection_extrac()</code>) which simplifies the data object from a
“GEOMETRYCOLLECTION” to a single “POLYGON”. Don’t get too hung up on these steps
to ‘fix’ the Shapefile data. Unfortunately, it is just one of those things that
you might have to wrestle with when importing data.</p>
<p>Note that we are using the <em>pipe</em> (<code>%&gt;%</code>) function in the code below. This is a
key component of the <em>tidyverse</em> and may be new to users more familiar with
standard R code.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">library</span>(lwgeom)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">hiatus &lt;-<span class="st"> </span>hiatus <span class="op">%&gt;%</span><span class="st"> </span>lwgeom<span class="op">::</span><span class="kw">st_make_valid</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="st">  </span>sf<span class="op">::</span><span class="kw">st_collection_extract</span>()</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co"># base R version</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co"># hiatus &lt;- lwgeom::st_make_valid(hiatus)</span></a></code></pre></div>
<p>Now, let’s just do a quick plot of hiatus so we can verify it looks valid</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">hiatus <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">plot</span>()</a></code></pre></div>
<p><img src="solamac-spatial-mapping_files/figure-html/check-plot-1.png" width="672" /></p>
</div>
<div id="first-map-with-ggplot" class="section level2">
<h2><span class="header-section-number">3.2</span> First Map with ggplot</h2>
<p>While this demonstrates that we have successfully imported the spatial data into
R, it is not a very satisfying map. We will use the <code>ggplot2</code> package as the
basis for all of our mapping. If you are not already familiar with <code>ggplot2</code>, it
is a widely used framework for creating all types of plots and graphics from
within R. <code>ggplot2</code> has special extensions and capabilities with respect to
simple features (<code>sf</code>) data that simplifies creation of publication quality
maps.</p>
<p>First, lets repeat our previous plot but this time with <code>ggplot2</code></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># ggplot2 is already loaded as part of the tidyverse</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> hiatus)</a></code></pre></div>
<p><img src="solamac-spatial-mapping_files/figure-html/quick_ggplot-1.png" width="672" /></p>
<p>This is a nicer looking plot and, note, <code>ggplot2</code> has kindly added graticule
ticks for the longitude and latitude values. It would be nice, however, if we
had some land and ocean features so we can better appreciate this hiatus region.</p>
<p>For this, we can use the <code>ggspatial</code> package to import map tiles hosted exernally
via the internet. In this first example, we will pull map tiles from the Open
Street Map service.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">library</span>(ggspatial)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="st">  </span><span class="kw">annotation_map_tile</span>(<span class="dt">type =</span> <span class="st">&quot;osm&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="st">  </span><span class="kw">layer_spatial</span>(hiatus)</a></code></pre></div>
<pre><code>## Zoom: 7</code></pre>
<p><img src="solamac-spatial-mapping_files/figure-html/hiatus-osm-1.png" width="672" /></p>
<p>This is an improvement, but it might be better if we added some transparency
to the hiatus polygon so we can see the land features underneath. We can also
change the color and weight of the line so it stands out more.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="st">  </span><span class="kw">annotation_map_tile</span>(<span class="dt">type =</span> <span class="st">&quot;osm&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="st">  </span><span class="kw">layer_spatial</span>(hiatus, <span class="dt">col =</span> <span class="st">&quot;dark red&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.4</span>, <span class="dt">size =</span> <span class="dv">2</span>)</a></code></pre></div>
<pre><code>## Zoom: 7</code></pre>
<p><img src="solamac-spatial-mapping_files/figure-html/hiatus-osm-2-1.png" width="672" /></p>
<p>Now we have a slightly better sense of where we are in relation to the nearby
land. But, it might be useful to zoom out a bit more so we can get a better
sense of the areas location and nearby geograph. Note the arguments to
<em>expand</em> within <code>scale_x_continuous</code> and <code>scale_y_continuous</code> are in units
of degrees longitude and latitude.</p>
<p>While we are at it, we can also add a scale bar in the bottomr right.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="st">  </span><span class="kw">annotation_map_tile</span>(<span class="dt">type =</span> <span class="st">&quot;osm&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="st">  </span><span class="kw">layer_spatial</span>(hiatus, <span class="dt">col =</span> <span class="st">&quot;dark red&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.4</span>, <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="fl">1.5</span>,<span class="fl">1.5</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="st">  </span><span class="kw">annotation_scale</span>(<span class="dt">location =</span> <span class="st">&quot;br&quot;</span>, <span class="dt">width_hint =</span> <span class="fl">0.5</span>, <span class="dt">style =</span> <span class="st">&quot;ticks&quot;</span>)</a></code></pre></div>
<pre><code>## Zoom: 6</code></pre>
<p><img src="solamac-spatial-mapping_files/figure-html/hiatus-osm-3-1.png" width="672" /></p>
<p>The Open Street Map project is not really designed for environmental or marine
centric maps. A better option might be the ESRI World Ocean Basemap which provides
detailed bathymetry and topography for the entire globe.</p>
<p>We need to specify the URL location for the tile service:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">esri_ocean &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;https://services.arcgisonline.com/arcgis/rest/services/&#39;</span>,</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">                     <span class="st">&#39;Ocean/World_Ocean_Base/MapServer/tile/${z}/${y}/${x}.jpeg&#39;</span>)</a></code></pre></div>
<p>And, then we can replace the <code>annotation_map_tile()</code> in the previous code</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="st">  </span><span class="kw">annotation_map_tile</span>(<span class="dt">type =</span> esri_ocean, <span class="dt">zoomin =</span> <span class="dv">1</span>, <span class="dt">progress =</span> <span class="st">&quot;none&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="st">  </span><span class="kw">layer_spatial</span>(hiatus, <span class="dt">col =</span> <span class="st">&quot;dark red&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.4</span>, <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-4" data-line-number="4"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="fl">1.5</span>,<span class="fl">1.5</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-6" data-line-number="6"><span class="st">  </span><span class="kw">annotation_scale</span>(<span class="dt">location =</span> <span class="st">&quot;br&quot;</span>, <span class="dt">width_hint =</span> <span class="fl">0.5</span>, <span class="dt">style =</span> <span class="st">&quot;ticks&quot;</span>)</a></code></pre></div>
<p><img src="solamac-spatial-mapping_files/figure-html/hiatus-esri-ocean-1.png" width="672" /></p>
<p>Now that we no longer have place names, it is important to add a title and
subtitle to the map so we can inform the user about what this is and where
it is in the world.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="st">  </span><span class="kw">annotation_map_tile</span>(<span class="dt">type =</span> esri_ocean, <span class="dt">zoomin =</span> <span class="dv">1</span>, <span class="dt">progress =</span> <span class="st">&quot;none&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="st">  </span><span class="kw">layer_spatial</span>(hiatus, <span class="dt">col =</span> <span class="st">&quot;dark red&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.4</span>, <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-4" data-line-number="4"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="fl">1.5</span>,<span class="fl">1.5</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-6" data-line-number="6"><span class="st">  </span><span class="kw">annotation_scale</span>(<span class="dt">location =</span> <span class="st">&quot;tl&quot;</span>, </a>
<a class="sourceLine" id="cb24-7" data-line-number="7">                   <span class="dt">width_hint =</span> <span class="fl">0.5</span>, </a>
<a class="sourceLine" id="cb24-8" data-line-number="8">                   <span class="dt">style =</span> <span class="st">&quot;ticks&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-9" data-line-number="9"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Franciscana Hiatus Region&quot;</span>,</a>
<a class="sourceLine" id="cb24-10" data-line-number="10">          <span class="dt">subtitle =</span> <span class="st">&quot;Area of limited Franciscana sightings off NE Brazil&quot;</span>)</a></code></pre></div>
<p><img src="solamac-spatial-mapping_files/figure-html/hiatus-esri-ocean-2-1.png" width="672" /></p>
<p>There are variety of other style options available for tile maps that you
can explore. Here are some additional tiles that you might prefer</p>
<div id="cartolight" class="section level3">
<h3><span class="header-section-number">3.2.1</span> cartolight</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="st">  </span><span class="kw">annotation_map_tile</span>(<span class="dt">type =</span> <span class="st">&quot;cartolight&quot;</span>, <span class="dt">zoomin =</span> <span class="dv">1</span>, <span class="dt">progress =</span> <span class="st">&quot;none&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="st">  </span><span class="kw">layer_spatial</span>(hiatus, <span class="dt">col =</span> <span class="st">&quot;dark red&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.4</span>, <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-4" data-line-number="4"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="fl">1.5</span>,<span class="fl">1.5</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-6" data-line-number="6"><span class="st">  </span><span class="kw">annotation_scale</span>(<span class="dt">location =</span> <span class="st">&quot;tl&quot;</span>, </a>
<a class="sourceLine" id="cb25-7" data-line-number="7">                   <span class="dt">width_hint =</span> <span class="fl">0.5</span>, </a>
<a class="sourceLine" id="cb25-8" data-line-number="8">                   <span class="dt">style =</span> <span class="st">&quot;ticks&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-9" data-line-number="9"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Franciscana Hiatus Region&quot;</span>,</a>
<a class="sourceLine" id="cb25-10" data-line-number="10">          <span class="dt">subtitle =</span> <span class="st">&quot;Area of limited Franciscana sightings off NE Brazil&quot;</span>)</a></code></pre></div>
<p><img src="solamac-spatial-mapping_files/figure-html/hiatus-cartolight-1.png" width="672" /></p>
</div>
<div id="microsoft-bing-aerial-imagery" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Microsoft Bing Aerial Imagery</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="st">  </span><span class="kw">annotation_map_tile</span>(<span class="dt">type =</span> <span class="st">&quot;http://ecn.t3.tiles.virtualearth.net/tiles/a${q}.jpeg?g=1&quot;</span>, <span class="dt">zoomin =</span> <span class="dv">1</span>, <span class="dt">progress =</span> <span class="st">&quot;none&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="st">  </span><span class="kw">layer_spatial</span>(hiatus, <span class="dt">col =</span> <span class="st">&quot;dark red&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.4</span>, <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb26-4" data-line-number="4"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="fl">1.5</span>,<span class="fl">1.5</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb26-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb26-6" data-line-number="6"><span class="st">  </span><span class="kw">annotation_scale</span>(<span class="dt">location =</span> <span class="st">&quot;tl&quot;</span>, </a>
<a class="sourceLine" id="cb26-7" data-line-number="7">                   <span class="dt">width_hint =</span> <span class="fl">0.5</span>, </a>
<a class="sourceLine" id="cb26-8" data-line-number="8">                   <span class="dt">style =</span> <span class="st">&quot;ticks&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb26-9" data-line-number="9"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Franciscana Hiatus Region&quot;</span>,</a>
<a class="sourceLine" id="cb26-10" data-line-number="10">          <span class="dt">subtitle =</span> <span class="st">&quot;Area of limited Franciscana sightings off NE Brazil&quot;</span>)</a></code></pre></div>
<p><img src="solamac-spatial-mapping_files/figure-html/hiatus-bing-aerial-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["solamac-spatial-mapping.pdf", "solamac-spatial-mapping.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
